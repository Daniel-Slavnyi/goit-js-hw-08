{"mappings":"AAEA,MAAMA,EAASC,SAASC,cAAc,kBAGtCF,EAAOG,iBAAiB,SAIxB,SAAuBC,GACnB,MAAMC,KAAEA,EAAIC,MAAEA,GAAUF,EAAEG,OAE1B,IAAIC,EAAUC,aAAaC,QATX,aAUhBF,EAAUA,EAAUG,KAAKC,MAAMJ,GAAW,GAE1CA,EAAQH,GAAQC,EAEhBG,aAAaI,QAdG,YAckBF,KAAKG,UAAUN,G,IAXrDR,EAAOG,iBAAiB,UAcxB,SAAwBC,GACpBA,EAAEW,iBACF,MAAMC,EAAU,GAEC,IAAIC,SAASjB,GACrBkB,SAAQ,CAACZ,EAAOD,KACrBW,EAAQX,GAAQC,CAAK,IAGzBa,QAAQC,IAAIJ,GACZhB,EAAOqB,QACPZ,aAAaa,WA5BG,Y,IA+BpB,SAAqBlB,GACjB,IAAImB,EAAcd,aAAaC,QAhCf,aAkCZa,IACAA,EAAcZ,KAAKC,MAAMW,GAEzBC,OAAOC,QAAQF,GAAaL,SAAQ,EAAEb,EAAMC,MACxCN,EAAO0B,SAASrB,GAAMC,MAAQA,CAAK,I,CAlC/CqB","sources":["src/js/03-feedback.js"],"sourcesContent":["'use strict';\n\nconst formEl = document.querySelector('.feedback-form'),\n      STORAGE_KEY = 'data-form';\n\nformEl.addEventListener('input', onFormElInput);\nformEl.addEventListener('submit', onFormElSubmit);\ninitialPage();\n\nfunction onFormElInput(e) {\n    const { name, value } = e.target;\n\n    let localSt = localStorage.getItem(STORAGE_KEY);\n    localSt = localSt ? JSON.parse(localSt) : {};\n    \n    localSt[name] = value;\n\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(localSt));\n}\n\nfunction onFormElSubmit(e) {\n    e.preventDefault();\n    const objData = {};\n\n    const formData = new FormData(formEl);\n    formData.forEach((value, name) => {\n        objData[name] = value;\n    }); \n        \n    console.log(objData);\n    formEl.reset();\n    localStorage.removeItem(STORAGE_KEY);\n}\n\nfunction initialPage(e) {\n    let storageData = localStorage.getItem(STORAGE_KEY);\n\n    if (storageData) {\n        storageData = JSON.parse(storageData);\n        \n        Object.entries(storageData).forEach(([name, value]) => {\n            formEl.elements[name].value = value;\n        });\n    }\n}\n// ===================== FIRST VARIANT =====================\n\n// import throttle from \"lodash.throttle\";\n\n// const formEl = document.querySelector('.feedback-form'),\n//     STORAGE_KEY = 'data-form';\n\n// let savedData = JSON.parse(localStorage.getItem(STORAGE_KEY)) ?? {};\n\n// Object.entries(savedData).forEach(([name, value]) => {\n//         formEl.elements[name].value = value;\n//     });\n\n\n// formEl.addEventListener('input', throttle(onFormElInput, 500));\n\n// function onFormElInput(e) {\n//     const { name, value } = e.target;\n    \n//     savedData = {\n//         ...savedData,\n//         [name]: value,\n//     };\n    \n//     localStorage.setItem(STORAGE_KEY, JSON.stringify(savedData));\n// }\n\n// formEl.addEventListener('submit', onFormElSubmit);\n\n// function onFormElSubmit(e) {\n//     e.preventDefault();\n//     const objData = {};\n\n//     const dataForm = new FormData(formEl);\n    \n//     for (let [name, value] of dataForm.entries()) {\n//         if (!value) {\n//             console.log('fill input');\n//             return;\n//         }\n//         objData[name] = value;\n//     }\n//     localStorage.removeItem(STORAGE_KEY);\n//     formEl.reset();\n//     console.log(objData);\n// }"],"names":["$945622fd0f572e60$var$formEl","document","querySelector","addEventListener","e","name","value","target","localSt","localStorage","getItem","JSON","parse","setItem","stringify","preventDefault","objData","FormData","forEach","console","log","reset","removeItem","storageData","Object","entries","elements","$945622fd0f572e60$var$initialPage"],"version":3,"file":"03-feedback.580e1461.js.map"}